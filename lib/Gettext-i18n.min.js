Gettext=function(t){this.domain="messages",this.locale_data=void 0;var e=["domain","locale_data"];if(this.isValidObject(t))for(var r in t)for(var a=0;a<e.length;a++)r==e[a]&&this.isValidObject(t[r])&&(this[r]=t[r]);return this.try_load_lang(),this},Gettext.context_glue="",Gettext._locale_data={},Gettext.prototype.try_load_lang=function(){if("undefined"!=typeof this.locale_data){var t=this.locale_data;if(this.locale_data=void 0,this.parse_locale_data(t),"undefined"==typeof Gettext._locale_data[this.domain])throw new Error("Error: Gettext 'locale_data' does not contain the domain '"+this.domain+"'")}var e=this.get_lang_refs();if("object"==typeof e&&e.length>0)for(var r=0;r<e.length;r++){var a=e[r];if("application/json"==a.type){if(!this.try_load_lang_json(a.href))throw new Error("Error: Gettext 'try_load_lang_json' failed. Unable to exec xmlhttprequest for link ["+a.href+"]")}else{if("application/x-po"!=a.type)throw new Error("TODO: link type ["+a.type+"] found, and support is planned, but not implemented at this time.");if(!this.try_load_lang_po(a.href))throw new Error("Error: Gettext 'try_load_lang_po' failed. Unable to exec xmlhttprequest for link ["+a.href+"]")}}},Gettext.prototype.parse_locale_data=function(t){"undefined"==typeof Gettext._locale_data&&(Gettext._locale_data={});for(var e in t)if(t.hasOwnProperty(e)&&this.isValidObject(t[e])){var r=!1;for(var a in t[e]){r=!0;break}if(r){var n=t[e];""==e&&(e="messages"),this.isValidObject(Gettext._locale_data[e])||(Gettext._locale_data[e]={}),this.isValidObject(Gettext._locale_data[e].head)||(Gettext._locale_data[e].head={}),this.isValidObject(Gettext._locale_data[e].msgs)||(Gettext._locale_data[e].msgs={});for(var i in n)if(""==i){var o=n[i];for(var l in o){var s=l.toLowerCase();Gettext._locale_data[e].head[s]=o[l]}}else Gettext._locale_data[e].msgs[i]=n[i]}}for(var e in Gettext._locale_data)if(this.isValidObject(Gettext._locale_data[e].head["plural-forms"])&&"undefined"==typeof Gettext._locale_data[e].head.plural_func){var p=Gettext._locale_data[e].head["plural-forms"],u=new RegExp("^(\\s*nplurals\\s*=\\s*[0-9]+\\s*;\\s*plural\\s*=\\s*(?:\\s|[-\\?\\|&=!<>+*/%:;a-zA-Z0-9_()])+)","m");if(!u.test(p))throw new Error("Syntax error in language file. Plural-Forms header is invalid ["+p+"]");var c=Gettext._locale_data[e].head["plural-forms"];/;\s*$/.test(c)||(c=c.concat(";"));var d="var plural; var nplurals; "+c+' return { "nplural" : nplurals, "plural" : (plural === true ? 1 : plural ? plural : 0) };';Gettext._locale_data[e].head.plural_func=new Function("n",d)}else"undefined"==typeof Gettext._locale_data[e].head.plural_func&&(Gettext._locale_data[e].head.plural_func=function(t){var e=1!=t?1:0;return{nplural:2,plural:e}})},Gettext.prototype.try_load_lang_po=function(t){var e=this.sjax(t);if(e){var r=this.uri_basename(t),a=this.parse_po(e),n={};return a&&(a[""]||(a[""]={}),a[""].domain||(a[""].domain=r),r=a[""].domain,n[r]=a,this.parse_locale_data(n)),1}},Gettext.prototype.uri_basename=function(t){var e;if(e=t.match(/^(.*\/)?(.*)/)){var r;return(r=e[2].match(/^(.*)\..+$/))?r[1]:e[2]}return""},Gettext.prototype.parse_po=function(t){for(var e={},r={},a="",n=[],i=t.split("\n"),o=0;o<i.length;o++){i[o]=i[o].replace(/(\n|\r)+$/,"");var l;if(/^$/.test(i[o])){if("undefined"!=typeof r.msgid){var s="undefined"!=typeof r.msgctxt&&r.msgctxt.length?r.msgctxt+Gettext.context_glue+r.msgid:r.msgid,p="undefined"!=typeof r.msgid_plural&&r.msgid_plural.length?r.msgid_plural:null,u=[];for(var c in r){var l;(l=c.match(/^msgstr_(\d+)/))&&(u[parseInt(l[1])]=r[c])}u.unshift(p),u.length>1&&(e[s]=u),r={},a=""}}else{if(/^#/.test(i[o]))continue;(l=i[o].match(/^msgctxt\s+(.*)/))?(a="msgctxt",r[a]=this.parse_po_dequote(l[1])):(l=i[o].match(/^msgid\s+(.*)/))?(a="msgid",r[a]=this.parse_po_dequote(l[1])):(l=i[o].match(/^msgid_plural\s+(.*)/))?(a="msgid_plural",r[a]=this.parse_po_dequote(l[1])):(l=i[o].match(/^msgstr\s+(.*)/))?(a="msgstr_0",r[a]=this.parse_po_dequote(l[1])):(l=i[o].match(/^msgstr\[0\]\s+(.*)/))?(a="msgstr_0",r[a]=this.parse_po_dequote(l[1])):(l=i[o].match(/^msgstr\[(\d+)\]\s+(.*)/))?(a="msgstr_"+l[1],r[a]=this.parse_po_dequote(l[2])):/^"/.test(i[o])?r[a]+=this.parse_po_dequote(i[o]):n.push("Strange line ["+o+"] : "+i[o])}}if("undefined"!=typeof r.msgid){var s="undefined"!=typeof r.msgctxt&&r.msgctxt.length?r.msgctxt+Gettext.context_glue+r.msgid:r.msgid,p="undefined"!=typeof r.msgid_plural&&r.msgid_plural.length?r.msgid_plural:null,u=[];for(var c in r){var l;(l=c.match(/^msgstr_(\d+)/))&&(u[parseInt(l[1])]=r[c])}u.unshift(p),u.length>1&&(e[s]=u),r={},a=""}if(e[""]&&e[""][1]){for(var d={},f=e[""][1].split(/\\n/),o=0;o<f.length;o++)if(f.length){var h=f[o].indexOf(":",0);if(-1!=h){var g=f[o].substring(0,h),_=f[o].substring(h+1),x=g.toLowerCase();d[x]&&d[x].length?n.push("SKIPPING DUPLICATE HEADER LINE: "+f[o]):/#-#-#-#-#/.test(x)?n.push("SKIPPING ERROR MARKER IN HEADER: "+f[o]):(_=_.replace(/^\s+/,""),d[x]=_)}else n.push("PROBLEM LINE IN HEADER: "+f[o]),d[f[o]]=""}e[""]=d}else e[""]={};return e},Gettext.prototype.parse_po_dequote=function(t){var e;return(e=t.match(/^"(.*)"/))&&(t=e[1]),t=t.replace(/\\"/g,'"')},Gettext.prototype.try_load_lang_json=function(t){var e=this.sjax(t);if(e){var r=this.JSON(e);return this.parse_locale_data(r),1}},Gettext.prototype.get_lang_refs=function(){for(var t=new Array,e=document.getElementsByTagName("link"),r=0;r<e.length;r++)if("gettext"==e[r].rel&&e[r].href){if("undefined"==typeof e[r].type||""==e[r].type)if(/\.json$/i.test(e[r].href))e[r].type="application/json";else if(/\.js$/i.test(e[r].href))e[r].type="application/json";else if(/\.po$/i.test(e[r].href))e[r].type="application/x-po";else{if(!/\.mo$/i.test(e[r].href))throw new Error("LINK tag with rel=gettext found, but the type and extension are unrecognized.");e[r].type="application/x-mo"}if(e[r].type=e[r].type.toLowerCase(),"application/json"==e[r].type)e[r].type="application/json";else if("text/javascript"==e[r].type)e[r].type="application/json";else if("application/x-po"==e[r].type)e[r].type="application/x-po";else{if("application/x-mo"!=e[r].type)throw new Error("LINK tag with rel=gettext found, but the type attribute ["+e[r].type+"] is unrecognized.");e[r].type="application/x-mo"}t.push(e[r])}return t},Gettext.prototype.textdomain=function(t){return t&&t.length&&(this.domain=t),this.domain},Gettext.prototype.gettext=function(t){var e,r,a,n;return this.dcnpgettext(null,e,t,r,a,n)},Gettext.prototype.dgettext=function(t,e){var r,a,n,i;return this.dcnpgettext(t,r,e,a,n,i)},Gettext.prototype.dcgettext=function(t,e,r){var a,n,i;return this.dcnpgettext(t,a,e,n,i,r)},Gettext.prototype.ngettext=function(t,e,r){var a,n;return this.dcnpgettext(null,a,t,e,r,n)},Gettext.prototype.dngettext=function(t,e,r,a){var n,i;return this.dcnpgettext(t,n,e,r,a,i)},Gettext.prototype.dcngettext=function(t,e,r,a,n){var i;return this.dcnpgettext(t,i,e,r,a,n,n)},Gettext.prototype.pgettext=function(t,e){var r,a,n;return this.dcnpgettext(null,t,e,r,a,n)},Gettext.prototype.dpgettext=function(t,e,r){var a,n,i;return this.dcnpgettext(t,e,r,a,n,i)},Gettext.prototype.dcpgettext=function(t,e,r,a){var n,i;return this.dcnpgettext(t,e,r,n,i,a)},Gettext.prototype.npgettext=function(t,e,r,a){var n;return this.dcnpgettext(null,t,e,r,a,n)},Gettext.prototype.dnpgettext=function(t,e,r,a,n){var i;return this.dcnpgettext(t,e,r,a,n,i)},Gettext.prototype.dcnpgettext=function(t,e,r,a,n,i){if(!this.isValidObject(r))return"";var o=this.isValidObject(a),l=this.isValidObject(e)?e+Gettext.context_glue+r:r,s=this.isValidObject(t)?t:this.isValidObject(this.domain)?this.domain:"messages",p=new Array;if("undefined"!=typeof Gettext._locale_data&&this.isValidObject(Gettext._locale_data[s]))p.push(Gettext._locale_data[s]);else if("undefined"!=typeof Gettext._locale_data)for(var u in Gettext._locale_data)p.push(Gettext._locale_data[u]);var c,d=[],f=!1;if(p.length)for(var h=0;h<p.length;h++){var g=p[h];if(this.isValidObject(g.msgs[l])){for(var _=0;_<g.msgs[l].length;_++)d[_]=g.msgs[l][_];if(d.shift(),c=g,f=!0,d.length>0&&0!=d[0].length)break}}(0==d.length||0==d[0].length)&&(d=[r,a]);var x=d[0];if(o){var y;if(f&&this.isValidObject(c.head.plural_func)){var m=c.head.plural_func(n);m.plural||(m.plural=0),m.nplural||(m.nplural=0),m.nplural<=m.plural&&(m.plural=0),y=m.plural}else y=1!=n?1:0;this.isValidObject(d[y])&&(x=d[y])}return x},Gettext.strargs=function(t,e){null==e||"undefined"==typeof e?e=[]:e.constructor!=Array&&(e=[e]);for(var r="";;){var a,n=t.indexOf("%");if(-1==n){r+=t;break}if(r+=t.substr(0,n),"%%"==t.substr(n,2))r+="%",t=t.substr(n+2);else if(a=t.substr(n).match(/^%(\d+)/)){var i=parseInt(a[1]),o=a[1].length;i>0&&null!=e[i-1]&&"undefined"!=typeof e[i-1]&&(r+=e[i-1]),t=t.substr(n+1+o)}else r+="%",t=t.substr(n+1)}return r},Gettext.prototype.strargs=function(t,e){return Gettext.strargs(t,e)},Gettext.prototype.isArray=function(t){return this.isValidObject(t)&&t.constructor==Array},Gettext.prototype.isValidObject=function(t){return null==t?!1:"undefined"==typeof t?!1:!0},Gettext.prototype.sjax=function(t){var e;if(e=window.XMLHttpRequest?new XMLHttpRequest:-1!=navigator.userAgent.toLowerCase().indexOf("msie 5")?new ActiveXObject("Microsoft.XMLHTTP"):new ActiveXObject("Msxml2.XMLHTTP"),!e)throw new Error("Your browser doesn't do Ajax. Unable to support external language files.");e.open("GET",t,!1);try{e.send(null)}catch(t){return}var r=e.status;if(200==r||0==r)return e.responseText;var a=e.statusText+" (Error "+e.status+")";return e.responseText.length&&(a+="\n"+e.responseText),void alert(a)},Gettext.prototype.JSON=function(data){return eval("("+data+")")};var I18n=null,i18n=null,tr=null,trn=null,trnc=null,trc=null;!function(t){"use strict";var e=function(e){this.gettext=new t({locale_data:e})};e.prototype.tr=function(t){var e=Array.prototype.slice.call(arguments,1),r=this.gettext.gettext(t);return this._applyPattern(r,e)},e.prototype.trn=function(t,e,r){var a=Array.prototype.slice.call(arguments,2),n=this.gettext.ngettext(t,e,r);return this._applyPattern(n,a)},e.prototype.trc=function(t,e){var r=Array.prototype.slice.call(arguments,2),a=this.gettext.pgettext(t,e);return this._applyPattern(a,r)},e.prototype.trnc=function(t,e,r,a){var n=Array.prototype.slice.call(arguments,3),i=this.gettext.npgettext(t,e,r,a);return this._applyPattern(i,n)},e.prototype._applyPattern=function(t,e){return t=t.replace(/\\n/g,"\n"),t.replace(/\{(\d+)[^\}]*\}/g,function(){return e[arguments[1]]})}}(window.Gettext),function(t){"use strict";i18n=new I18n(t),tr=function(){return i18n.tr.apply(i18n,arguments)},trn=function(){return i18n.trn.apply(i18n,arguments)},trc=function(){return i18n.trc.apply(i18n,arguments)},trnc=function(){return i18n.trnc.apply(i18n,arguments)}}(window.i18n_datas);